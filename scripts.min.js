/*!
 * Leeds Talent Pool theme javascript
 * @author Peter Edwards <p.l.edwards@leeds.ac.uk>
 * @version 0.0.2
 * generated: 22-05-2015
 */
!function($){var thumb_size="thumbnail";$(".ppt-multiple").sortable({update:function(){setInputValue($(this).data("inputid"),$(this).sortable("toArray",{attribute:"data-imageid"}))},helper:"clone",items:"div.ppt-image-container"}),$(document).on("click",".ppt-media-file",function(e){if(e.preventDefault(),"undefined"!=typeof ppt_file_frame)return void ppt_file_frame.open();var inputID=$(this).data("inputid"),ppt_file_frame=wp.media.frames.ppt_file_frame=wp.media({title:ppt.file_select,multiple:!1,button:{text:ppt.file_select}});ppt_file_frame.on("select",function(){var file=ppt_file_frame.state().get("selection").first().toJSON();if(file){var newFile='<div class="ppt-file-container"><p><a data-inputid="'+inputID+'" data-fileid="'+file.id+'" class="ppt-file-link" href="'+file.url+'">'+file.title+'</a></p> <a class="ppt-remove-file" href="#" title="'+ppt.file_remove+'" data-inputid="'+inputID+'">&#61826;</a></div>';setInputValue(inputID,file.id),$("#"+inputID+"-preview").html(newFile)}else setInputValue(inputID,""),$("#"+inputID+"-preview").html('<div class="ppt-file-container"><p>'+ppt.file_empty+"</p></div>")}),ppt_file_frame.on("open",function(){var fileID=$("#"+inputID).val();if(""!==fileID&&parseInt(fileID)>0){var selection=ppt_file_frame.state().get("selection");attachment=wp.media.attachment(fileID),attachment.fetch(),selection.add(attachment?[attachment]:[])}}),ppt_file_frame.open()}),$(document).on("click",".ppt-media-multiple-images",function(e){if(e.preventDefault(),"undefined"!=typeof ppt_imgs_frame)return void ppt_imgs_frame.open();var inputID=$(this).data("inputid"),ppt_imgs_frame=wp.media.frames.ppt_imgs_frame=wp.media({title:ppt.img_select_multiple,multiple:!0,button:{text:ppt.img_select_multiple},library:{type:"image"}});ppt_imgs_frame.on("close",function(){var selection=ppt_imgs_frame.state().get("selection"),imageIDs=[],newImages="";selection.map(function(attachment){var image=attachment.toJSON(),imageURL=image.sizes&&image.sizes[thumb_size]?image.sizes[thumb_size].url:image.url;image.id&&(newImages+='<div class="ppt-image-container"><img src="'+imageURL+'" /><a class="ppt-remove-image ppt-multiple" href="#" title="'+ppt.img_remove+'">&#61826;</a></div>',imageIDs.push(image.id))}),imageIDs.length?(setInputValue(inputID,imageIDs.join(",")),$("#"+inputID+"-preview").html(newImages).sortable("refresh")):(setInputValue(inputID,""),$("#"+inputID+"-preview").html('<div class="ppt-image-container"><p>'+ppt.img_empty_multiple+"</p></div>"))}),ppt_imgs_frame.on("open",function(){var imgIDs=$("#"+inputID).val().split(","),selection=ppt_imgs_frame.state().get("selection");imgIDs&&imgIDs.length&&$.each(imgIDs,function(idx,val){attachment=wp.media.attachment(val),attachment.fetch(),selection.add(attachment?[attachment]:[])})}),ppt_imgs_frame.open()}),$(document).on("click",".ppt-media-single-image",function(e){if(e.preventDefault(),"undefined"!=typeof ppt_img_frame)return void ppt_img_frame.open();var inputID=$(this).data("inputid"),ppt_img_frame=wp.media.frames.ppt_img_frame=wp.media({title:ppt.img_select_single,multiple:!1,button:{text:ppt.img_select_single},frame:"select",library:{type:"image"}});ppt_img_frame.on("select",function(){var image=ppt_img_frame.state().get("selection").first().toJSON();if(image){var imageURL=image.sizes&&image.sizes[thumb_size]?image.sizes[thumb_size].url:image.url,newImage='<div class="ppt-image-container"><img src="'+imageURL+'" /><a class="ppt-remove-image ppt-single" href="#" title="'+ppt.img_remove+'" data-imageid="'+image.id+'" data-inputid="'+inputID+'">&#61826;</a></div>';setInputValue(inputID,image.id),$("#"+inputID+"-preview").html(newImage)}else setInputValue(inputID,""),$("#"+inputID+"-preview").html("<p>"+ppt.img_empty_single+"</p>")}),ppt_img_frame.on("open",function(){var imgID=$("#"+inputID).val();if(""!==imgID&&parseInt(imgID)>0){var selection=ppt_img_frame.state().get("selection");attachment=wp.media.attachment(imgID),attachment.fetch(),selection.add(attachment?[attachment]:[])}}),ppt_img_frame.open()}),$(document).on("click","a.ppt-remove-image",function(e){e.preventDefault();var inputID=$(this).data("inputid"),imageID=$(this).data("imageid"),currentImages=$("#"+inputID).val().split(","),newSlides=[];for(i=0;i<currentImages.length;i++)currentImages[i]!=imageID&&newSlides.push(currentImages[i]);if(newSlides.length)console.log(newSlides),setInputValue(inputID,newSlides.join(","));else{setInputValue(inputID,"");var emptymsg=$(this).hasClass("ppt-multiple")?ppt.img_empty_multiple:ppt.img_empty_single;$("#"+inputID+"-preview").html('<div class="ppt-image-container"><p>'+emptymsg+"</p></div>")}$(this).parents(".ppt-image-container").remove()}),$(document).on("click","a.ppt-remove-file",function(e){e.preventDefault();var inputID=$(this).data("inputid");setInputValue(inputID,""),$("#"+inputID+"-preview").html('<div class="ppt-file-container"><p>'+ppt.file_empty+"</p></div>")});var setInputValue=function(inputID,value){$("#"+inputID+"_value").text(value),$("#"+inputID).val(value)}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;l>i;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0===$.cookie(key)?!1:($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),function($,document,window){function $tag(tag,id,css){var element=document.createElement(tag);return id&&(element.id=prefix+id),css&&(element.style.cssText=css),$(element)}function winheight(){return window.innerHeight?window.innerHeight:$(window).height()}function Settings(element,options){options!==Object(options)&&(options={}),this.cache={},this.el=element,this.value=function(key){var dataAttr;return void 0===this.cache[key]&&(dataAttr=$(this.el).attr("data-cbox-"+key),void 0!==dataAttr?this.cache[key]=dataAttr:void 0!==options[key]?this.cache[key]=options[key]:void 0!==defaults[key]&&(this.cache[key]=defaults[key])),this.cache[key]},this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value}}function getIndex(increment){var max=$related.length,newIndex=(index+increment)%max;return 0>newIndex?max+newIndex:newIndex}function setSize(size,dimension){return Math.round((/%/.test(size)?("x"===dimension?$window.width():winheight())/100:1)*parseInt(size,10))}function isImage(settings,url){return settings.get("photo")||settings.get("photoRegex").test(url)}function retinaUrl(settings,url){return settings.get("retinaUrl")&&window.devicePixelRatio>1?url.replace(settings.get("photoRegex"),settings.get("retinaSuffix")):url}function trapFocus(e){"contains"in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]&&(e.stopPropagation(),$box.focus())}function setClass(str){setClass.str!==str&&($box.add($overlay).removeClass(setClass.str).addClass(str),setClass.str=str)}function getRelated(rel){index=0,rel&&rel!==!1&&"nofollow"!==rel?($related=$("."+boxElement).filter(function(){var options=$.data(this,colorbox),settings=new Settings(this,options);return settings.get("rel")===rel}),index=$related.index(settings.el),-1===index&&($related=$related.add(settings.el),index=$related.length-1)):$related=$(settings.el)}function trigger(event){$(document).trigger(event),$events.triggerHandler(event)}function launch(element){var options;if(!closing){if(options=$(element).data(colorbox),settings=new Settings(element,options),getRelated(settings.get("rel")),!open){open=active=!0,setClass(settings.get("className")),$box.css({visibility:"hidden",display:"block",opacity:""}),$loaded=$tag(div,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),$content.css({width:"",height:""}).append($loaded),interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(!0)-$content.height(),interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(!0)-$content.width(),loadedHeight=$loaded.outerHeight(!0),loadedWidth=$loaded.outerWidth(!0);var initialWidth=setSize(settings.get("initialWidth"),"x"),initialHeight=setSize(settings.get("initialHeight"),"y"),maxWidth=settings.get("maxWidth"),maxHeight=settings.get("maxHeight");settings.w=(maxWidth!==!1?Math.min(initialWidth,setSize(maxWidth,"x")):initialWidth)-loadedWidth-interfaceWidth,settings.h=(maxHeight!==!1?Math.min(initialHeight,setSize(maxHeight,"y")):initialHeight)-loadedHeight-interfaceHeight,$loaded.css({width:"",height:settings.h}),publicMethod.position(),trigger(event_open),settings.get("onOpen"),$groupControls.add($title).hide(),$box.focus(),settings.get("trapFocus")&&document.addEventListener&&(document.addEventListener("focus",trapFocus,!0),$events.one(event_closed,function(){document.removeEventListener("focus",trapFocus,!0)})),settings.get("returnFocus")&&$events.one(event_closed,function(){$(settings.el).focus()})}var opacity=parseFloat(settings.get("opacity"));$overlay.css({opacity:opacity===opacity?opacity:"",cursor:settings.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),settings.get("closeButton")?$close.html(settings.get("close")).appendTo($content):$close.appendTo("<div/>"),load()}}function appendHTML(){$box||(init=!1,$window=$(window),$box=$tag(div).attr({id:colorbox,"class":$.support.opacity===!1?prefix+"IE":"",role:"dialog",tabindex:"-1"}).hide(),$overlay=$tag(div,"Overlay").hide(),$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]),$wrap=$tag(div,"Wrapper"),$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+"Previous"}),$next=$('<button type="button"/>').attr({id:prefix+"Next"}),$slideshow=$tag("button","Slideshow"),$loadingOverlay),$close=$('<button type="button"/>').attr({id:prefix+"Close"}),$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,!1,"clear:left").append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,!1,"clear:left").append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find("div div").css({"float":"left"}),$loadingBay=$tag(div,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),$groupControls=$next.add($prev).add($current).add($slideshow)),document.body&&!$box.parent().length&&$(document.body).append($overlay,$box.append($wrap,$loadingBay))}function addBindings(){function clickHandler(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),launch(this))}return $box?(init||(init=!0,$next.click(function(){publicMethod.next()}),$prev.click(function(){publicMethod.prev()}),$close.click(function(){publicMethod.close()}),$overlay.click(function(){settings.get("overlayClose")&&publicMethod.close()}),$(document).bind("keydown."+prefix,function(e){var key=e.keyCode;open&&settings.get("escKey")&&27===key&&(e.preventDefault(),publicMethod.close()),open&&settings.get("arrowKey")&&$related[1]&&!e.altKey&&(37===key?(e.preventDefault(),$prev.click()):39===key&&(e.preventDefault(),$next.click()))}),$.isFunction($.fn.on)?$(document).on("click."+prefix,"."+boxElement,clickHandler):$("."+boxElement).live("click."+prefix,clickHandler)),!0):!1}function load(){var href,setResize,$inline,prep=publicMethod.prep,request=++requests;if(active=!0,photo=!1,trigger(event_purge),trigger(event_load),settings.get("onLoad"),settings.h=settings.get("height")?setSize(settings.get("height"),"y")-loadedHeight-interfaceHeight:settings.get("innerHeight")&&setSize(settings.get("innerHeight"),"y"),settings.w=settings.get("width")?setSize(settings.get("width"),"x")-loadedWidth-interfaceWidth:settings.get("innerWidth")&&setSize(settings.get("innerWidth"),"x"),settings.mw=settings.w,settings.mh=settings.h,settings.get("maxWidth")&&(settings.mw=setSize(settings.get("maxWidth"),"x")-loadedWidth-interfaceWidth,settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw),settings.get("maxHeight")&&(settings.mh=setSize(settings.get("maxHeight"),"y")-loadedHeight-interfaceHeight,settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh),href=settings.get("href"),loadingTimer=setTimeout(function(){$loadingOverlay.show()},100),settings.get("inline")){var $target=$(href);$inline=$("<div>").hide().insertBefore($target),$events.one(event_purge,function(){$inline.replaceWith($target)}),prep($target)}else settings.get("iframe")?prep(" "):settings.get("html")?prep(settings.get("html")):isImage(settings,href)?(href=retinaUrl(settings,href),photo=new Image,$(photo).addClass(prefix+"Photo").bind("error",function(){prep($tag(div,"Error").html(settings.get("imgError")))}).one("load",function(){request===requests&&setTimeout(function(){var percent;$.each(["alt","longdesc","aria-describedby"],function(i,val){var attr=$(settings.el).attr(val)||$(settings.el).attr("data-"+val);attr&&photo.setAttribute(val,attr)}),settings.get("retinaImage")&&window.devicePixelRatio>1&&(photo.height=photo.height/window.devicePixelRatio,photo.width=photo.width/window.devicePixelRatio),settings.get("scalePhotos")&&(setResize=function(){photo.height-=photo.height*percent,photo.width-=photo.width*percent},settings.mw&&photo.width>settings.mw&&(percent=(photo.width-settings.mw)/photo.width,setResize()),settings.mh&&photo.height>settings.mh&&(percent=(photo.height-settings.mh)/photo.height,setResize())),settings.h&&(photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+"px"),$related[1]&&(settings.get("loop")||$related[index+1])&&(photo.style.cursor="pointer",photo.onclick=function(){publicMethod.next()}),photo.style.width=photo.width+"px",photo.style.height=photo.height+"px",prep(photo)},1)}),photo.src=href):href&&$loadingBay.load(href,settings.get("data"),function(data,status){request===requests&&prep("error"===status?$tag(div,"Error").html(settings.get("xhrError")):$(this).contents())})}var $overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,init,defaults={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return $(this).attr("href")},title:function(){return this.title}},colorbox="colorbox",prefix="cbox",boxElement=prefix+"Element",event_open=prefix+"_open",event_load=prefix+"_load",event_complete=prefix+"_complete",event_cleanup=prefix+"_cleanup",event_closed=prefix+"_closed",event_purge=prefix+"_purge",$events=$("<a/>"),div="div",requests=0,previousCSS={},slideshow=function(){function clear(){clearTimeout(timeOut)}function set(){(settings.get("loop")||$related[index+1])&&(clear(),timeOut=setTimeout(publicMethod.next,settings.get("slideshowSpeed")))}function start(){$slideshow.html(settings.get("slideshowStop")).unbind(click).one(click,stop),$events.bind(event_complete,set).bind(event_load,clear),$box.removeClass(className+"off").addClass(className+"on")}function stop(){clear(),$events.unbind(event_complete,set).unbind(event_load,clear),$slideshow.html(settings.get("slideshowStart")).unbind(click).one(click,function(){publicMethod.next(),start()}),$box.removeClass(className+"on").addClass(className+"off")}function reset(){active=!1,$slideshow.hide(),clear(),$events.unbind(event_complete,set).unbind(event_load,clear),$box.removeClass(className+"off "+className+"on")}var active,timeOut,className=prefix+"Slideshow_",click="click."+prefix;return function(){active?settings.get("slideshow")||($events.unbind(event_cleanup,reset),reset()):settings.get("slideshow")&&$related[1]&&(active=!0,$events.one(event_cleanup,reset),settings.get("slideshowAuto")?start():stop(),$slideshow.show())}}();$[colorbox]||($(appendHTML),publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings,$obj=this;if(options=options||{},$.isFunction($obj))$obj=$("<a/>"),options.open=!0;else if(!$obj[0])return $obj;return $obj[0]?(appendHTML(),addBindings()&&(callback&&(options.onComplete=callback),$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options))}).addClass(boxElement),settings=new Settings($obj[0],options),settings.get("open")&&launch($obj[0])),$obj):$obj},publicMethod.position=function(speed,loadedCallback){function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=parseInt($box[0].style.width,10)-interfaceWidth+"px",$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=parseInt($box[0].style.height,10)-interfaceHeight+"px"}var css,scrollTop,scrollLeft,top=0,left=0,offset=$box.offset();if($window.unbind("resize."+prefix),$box.css({top:-9e4,left:-9e4}),scrollTop=$window.scrollTop(),scrollLeft=$window.scrollLeft(),settings.get("fixed")?(offset.top-=scrollTop,offset.left-=scrollLeft,$box.css({position:"fixed"})):(top=scrollTop,left=scrollLeft,$box.css({position:"absolute"})),left+=settings.get("right")!==!1?Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get("right"),"x"),0):settings.get("left")!==!1?setSize(settings.get("left"),"x"):Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2),top+=settings.get("bottom")!==!1?Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get("bottom"),"y"),0):settings.get("top")!==!1?setSize(settings.get("top"),"y"):Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2),$box.css({top:offset.top,left:offset.left,visibility:"visible"}),$wrap[0].style.width=$wrap[0].style.height="9999px",css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left},speed){var tempSpeed=0;$.each(css,function(i){return css[i]!==previousCSS[i]?void(tempSpeed=speed):void 0}),speed=tempSpeed}previousCSS=css,speed||$box.css(css),$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions(),active=!1,$wrap[0].style.width=settings.w+loadedWidth+interfaceWidth+"px",$wrap[0].style.height=settings.h+loadedHeight+interfaceHeight+"px",settings.get("reposition")&&setTimeout(function(){$window.bind("resize."+prefix,publicMethod.position)},1),$.isFunction(loadedCallback)&&loadedCallback()},step:modalDimensions})},publicMethod.resize=function(options){var scrolltop;open&&(options=options||{},options.width&&(settings.w=setSize(options.width,"x")-loadedWidth-interfaceWidth),options.innerWidth&&(settings.w=setSize(options.innerWidth,"x")),$loaded.css({width:settings.w}),options.height&&(settings.h=setSize(options.height,"y")-loadedHeight-interfaceHeight),options.innerHeight&&(settings.h=setSize(options.innerHeight,"y")),options.innerHeight||options.height||(scrolltop=$loaded.scrollTop(),$loaded.css({height:"auto"}),settings.h=$loaded.height()),$loaded.css({height:settings.h}),scrolltop&&$loaded.scrollTop(scrolltop),publicMethod.position("none"===settings.get("transition")?0:settings.get("speed")))},publicMethod.prep=function(object){function getWidth(){return settings.w=settings.w||$loaded.width(),settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w,settings.w}function getHeight(){return settings.h=settings.h||$loaded.height(),settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h,settings.h}if(open){var callback,speed="none"===settings.get("transition")?0:settings.get("speed");$loaded.remove(),$loaded=$tag(div,"LoadedContent").append(object),$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get("scrolling")?"auto":"hidden"}).css({height:getHeight()}).prependTo($content),$loadingBay.hide(),$(photo).css({"float":"none"}),setClass(settings.get("className")),callback=function(){function removeFilter(){$.support.opacity===!1&&$box[0].style.removeAttribute("filter")}var iframe,complete,total=$related.length;open&&(complete=function(){clearTimeout(loadingTimer),$loadingOverlay.hide(),trigger(event_complete),settings.get("onComplete")},$title.html(settings.get("title")).show(),$loaded.show(),total>1?("string"==typeof settings.get("current")&&$current.html(settings.get("current").replace("{current}",index+1).replace("{total}",total)).show(),$next[settings.get("loop")||total-1>index?"show":"hide"]().html(settings.get("next")),$prev[settings.get("loop")||index?"show":"hide"]().html(settings.get("previous")),slideshow(),settings.get("preloading")&&$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get("href");src&&isImage(settings,src)&&(src=retinaUrl(settings,src),img=document.createElement("img"),img.src=src)})):$groupControls.hide(),settings.get("iframe")?(iframe=document.createElement("iframe"),"frameBorder"in iframe&&(iframe.frameBorder=0),"allowTransparency"in iframe&&(iframe.allowTransparency="true"),settings.get("scrolling")||(iframe.scrolling="no"),$(iframe).attr({src:settings.get("href"),name:(new Date).getTime(),"class":prefix+"Iframe",allowFullScreen:!0}).one("load",complete).appendTo($loaded),$events.one(event_purge,function(){iframe.src="//about:blank"}),settings.get("fastIframe")&&$(iframe).trigger("load")):complete(),"fade"===settings.get("transition")?$box.fadeTo(speed,1,removeFilter):removeFilter())},"fade"===settings.get("transition")?$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)}):publicMethod.position(speed,callback)}},publicMethod.next=function(){!active&&$related[1]&&(settings.get("loop")||$related[index+1])&&(index=getIndex(1),launch($related[index]))},publicMethod.prev=function(){!active&&$related[1]&&(settings.get("loop")||index)&&(index=getIndex(-1),launch($related[index]))},publicMethod.close=function(){open&&!closing&&(closing=!0,open=!1,trigger(event_cleanup),settings.get("onCleanup"),$window.unbind("."+prefix),$overlay.fadeTo(settings.get("fadeOut")||0,0),$box.stop().fadeTo(settings.get("fadeOut")||0,0,function(){$box.hide(),$overlay.hide(),trigger(event_purge),$loaded.remove(),setTimeout(function(){closing=!1,trigger(event_closed),settings.get("onClosed")},1)}))},publicMethod.remove=function(){$box&&($box.stop(),$[colorbox].close(),$box.stop(!1,!0).remove(),$overlay.remove(),closing=!1,$box=null,$("."+boxElement).removeData(colorbox).removeClass(boxElement),$(document).unbind("click."+prefix).unbind("keydown."+prefix))},publicMethod.element=function(){return $(settings.el)},publicMethod.settings=defaults)}(jQuery,document,window),function($){var defaults={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:"",responsiveWidth:!1},$window=$(window),$document=$(document),sticked=[],windowHeight=$window.height(),scroller=function(){for(var scrollTop=$window.scrollTop(),documentHeight=$document.height(),dwh=documentHeight-windowHeight,extra=scrollTop>dwh?dwh-scrollTop:0,i=0;i<sticked.length;i++){var s=sticked[i],elementTop=s.stickyWrapper.offset().top,etse=elementTop-s.topSpacing-extra;if(etse>=scrollTop)null!==s.currentTop&&(s.stickyElement.css("position","").css("top",""),s.stickyElement.trigger("sticky-end",[s]).parent().removeClass(s.className),s.currentTop=null);else{var newTop=documentHeight-s.stickyElement.outerHeight()-s.topSpacing-s.bottomSpacing-scrollTop-extra;0>newTop?newTop+=s.topSpacing:newTop=s.topSpacing,s.currentTop!=newTop&&(s.stickyElement.css("position","fixed").css("top",newTop),"undefined"!=typeof s.getWidthFrom&&s.stickyElement.css("width",$(s.getWidthFrom).width()),s.stickyElement.trigger("sticky-start",[s]).parent().addClass(s.className),s.currentTop=newTop)}}},resizer=function(){windowHeight=$window.height();for(var i=0;i<sticked.length;i++){var s=sticked[i];"undefined"!=typeof s.getWidthFrom&&s.responsiveWidth===!0&&s.stickyElement.css("width",$(s.getWidthFrom).width())}},methods={init:function(options){var o=$.extend({},defaults,options);return this.each(function(){var stickyElement=$(this),stickyId=stickyElement.attr("id"),wrapper=(stickyId?stickyId+"-"+defaults.wrapperClassName:defaults.wrapperClassName,$("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(o.wrapperClassName));stickyElement.wrapAll(wrapper),o.center&&stickyElement.parent().css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"==stickyElement.css("float")&&stickyElement.css({"float":"none"}).parent().css({"float":"right"});var stickyWrapper=stickyElement.parent();stickyWrapper.css("height",stickyElement.outerHeight()),sticked.push({topSpacing:o.topSpacing,bottomSpacing:o.bottomSpacing,stickyElement:stickyElement,currentTop:null,stickyWrapper:stickyWrapper,className:o.className,getWidthFrom:o.getWidthFrom,responsiveWidth:o.responsiveWidth})})},update:scroller,unstick:function(){return this.each(function(){for(var unstickyElement=$(this),removeIdx=-1,i=0;i<sticked.length;i++)sticked[i].stickyElement.get(0)==unstickyElement.get(0)&&(removeIdx=i);-1!=removeIdx&&(sticked.splice(removeIdx,1),unstickyElement.unwrap(),unstickyElement.removeAttr("style"))})}};window.addEventListener?(window.addEventListener("scroll",scroller,!1),window.addEventListener("resize",resizer,!1)):window.attachEvent&&(window.attachEvent("onscroll",scroller),window.attachEvent("onresize",resizer)),$.fn.sticky=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.sticky"):methods.init.apply(this,arguments)},$.fn.unstick=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.sticky"):methods.unstick.apply(this,arguments)},$(function(){setTimeout(scroller,0)})}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($){function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event=$.event.fix(orgEvent),event.type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(deltaY=-1*orgEvent.deltaY,delta=deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}return absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||lowestDelta>absDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120===0}var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null},getLineHeight:function(elem){return parseInt($(elem)["offsetParent"in $.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})}),function(plugin,window){var factory=function($){return plugin($,window)};"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory:factory(jQuery)}(function($,window,undefined){$.fn.jScrollPane=function(settings){function JScrollPane(elem,s){function initialise(s){var isMaintainingPositon,lastContentX,lastContentY,hasContainingSpaceChanged,originalScrollTop,originalScrollLeft,maintainAtBottom=!1,maintainAtRight=!1;if(settings=s,pane===undefined)originalScrollTop=elem.scrollTop(),originalScrollLeft=elem.scrollLeft(),elem.css({overflow:"hidden",padding:0}),paneWidth=elem.innerWidth()+originalPaddingTotalWidth,paneHeight=elem.innerHeight(),elem.width(paneWidth),pane=$('<div class="jspPane" />').css("padding",originalPadding).append(elem.children()),container=$('<div class="jspContainer" />').css({width:paneWidth+"px",height:paneHeight+"px"}).append(pane).appendTo(elem);
else{if(elem.css("width",""),maintainAtBottom=settings.stickToBottom&&isCloseToBottom(),maintainAtRight=settings.stickToRight&&isCloseToRight(),hasContainingSpaceChanged=elem.innerWidth()+originalPaddingTotalWidth!=paneWidth||elem.outerHeight()!=paneHeight,hasContainingSpaceChanged&&(paneWidth=elem.innerWidth()+originalPaddingTotalWidth,paneHeight=elem.innerHeight(),container.css({width:paneWidth+"px",height:paneHeight+"px"})),!hasContainingSpaceChanged&&previousContentWidth==contentWidth&&pane.outerHeight()==contentHeight)return void elem.width(paneWidth);previousContentWidth=contentWidth,pane.css("width",""),elem.width(paneWidth),container.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}pane.css("overflow","auto"),contentWidth=s.contentWidth?s.contentWidth:pane[0].scrollWidth,contentHeight=pane[0].scrollHeight,pane.css("overflow",""),percentInViewH=contentWidth/paneWidth,percentInViewV=contentHeight/paneHeight,isScrollableV=percentInViewV>1,isScrollableH=percentInViewH>1,isScrollableH||isScrollableV?(elem.addClass("jspScrollable"),isMaintainingPositon=settings.maintainPosition&&(verticalDragPosition||horizontalDragPosition),isMaintainingPositon&&(lastContentX=contentPositionX(),lastContentY=contentPositionY()),initialiseVerticalScroll(),initialiseHorizontalScroll(),resizeScrollbars(),isMaintainingPositon&&(scrollToX(maintainAtRight?contentWidth-paneWidth:lastContentX,!1),scrollToY(maintainAtBottom?contentHeight-paneHeight:lastContentY,!1)),initFocusHandler(),initMousewheel(),initTouch(),settings.enableKeyboardNavigation&&initKeyboardNav(),settings.clickOnTrack&&initClickOnTrack(),observeHash(),settings.hijackInternalLinks&&hijackInternalLinks()):(elem.removeClass("jspScrollable"),pane.css({top:0,left:0,width:container.width()-originalPaddingTotalWidth}),removeMousewheel(),removeFocusHandler(),removeKeyboardNav(),removeClickOnTrack()),settings.autoReinitialise&&!reinitialiseInterval?reinitialiseInterval=setInterval(function(){initialise(settings)},settings.autoReinitialiseDelay):!settings.autoReinitialise&&reinitialiseInterval&&clearInterval(reinitialiseInterval),originalScrollTop&&elem.scrollTop(0)&&scrollToY(originalScrollTop,!1),originalScrollLeft&&elem.scrollLeft(0)&&scrollToX(originalScrollLeft,!1),elem.trigger("jsp-initialised",[isScrollableH||isScrollableV])}function initialiseVerticalScroll(){isScrollableV&&(container.append($('<div class="jspVerticalBar" />').append($('<div class="jspCap jspCapTop" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragTop" />'),$('<div class="jspDragBottom" />'))),$('<div class="jspCap jspCapBottom" />'))),verticalBar=container.find(">.jspVerticalBar"),verticalTrack=verticalBar.find(">.jspTrack"),verticalDrag=verticalTrack.find(">.jspDrag"),settings.showArrows&&(arrowUp=$('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",getArrowScroll(0,-1)).bind("click.jsp",nil),arrowDown=$('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",getArrowScroll(0,1)).bind("click.jsp",nil),settings.arrowScrollOnHover&&(arrowUp.bind("mouseover.jsp",getArrowScroll(0,-1,arrowUp)),arrowDown.bind("mouseover.jsp",getArrowScroll(0,1,arrowDown))),appendArrows(verticalTrack,settings.verticalArrowPositions,arrowUp,arrowDown)),verticalTrackHeight=paneHeight,container.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){verticalTrackHeight-=$(this).outerHeight()}),verticalDrag.hover(function(){verticalDrag.addClass("jspHover")},function(){verticalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil),verticalDrag.addClass("jspActive");var startY=e.pageY-verticalDrag.position().top;return $("html").bind("mousemove.jsp",function(e){positionDragY(e.pageY-startY,!1)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag),!1}),sizeVerticalScrollbar())}function sizeVerticalScrollbar(){verticalTrack.height(verticalTrackHeight+"px"),verticalDragPosition=0,scrollbarWidth=settings.verticalGutter+verticalTrack.outerWidth(),pane.width(paneWidth-scrollbarWidth-originalPaddingTotalWidth);try{0===verticalBar.position().left&&pane.css("margin-left",scrollbarWidth+"px")}catch(err){}}function initialiseHorizontalScroll(){isScrollableH&&(container.append($('<div class="jspHorizontalBar" />').append($('<div class="jspCap jspCapLeft" />'),$('<div class="jspTrack" />').append($('<div class="jspDrag" />').append($('<div class="jspDragLeft" />'),$('<div class="jspDragRight" />'))),$('<div class="jspCap jspCapRight" />'))),horizontalBar=container.find(">.jspHorizontalBar"),horizontalTrack=horizontalBar.find(">.jspTrack"),horizontalDrag=horizontalTrack.find(">.jspDrag"),settings.showArrows&&(arrowLeft=$('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",getArrowScroll(-1,0)).bind("click.jsp",nil),arrowRight=$('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",getArrowScroll(1,0)).bind("click.jsp",nil),settings.arrowScrollOnHover&&(arrowLeft.bind("mouseover.jsp",getArrowScroll(-1,0,arrowLeft)),arrowRight.bind("mouseover.jsp",getArrowScroll(1,0,arrowRight))),appendArrows(horizontalTrack,settings.horizontalArrowPositions,arrowLeft,arrowRight)),horizontalDrag.hover(function(){horizontalDrag.addClass("jspHover")},function(){horizontalDrag.removeClass("jspHover")}).bind("mousedown.jsp",function(e){$("html").bind("dragstart.jsp selectstart.jsp",nil),horizontalDrag.addClass("jspActive");var startX=e.pageX-horizontalDrag.position().left;return $("html").bind("mousemove.jsp",function(e){positionDragX(e.pageX-startX,!1)}).bind("mouseup.jsp mouseleave.jsp",cancelDrag),!1}),horizontalTrackWidth=container.innerWidth(),sizeHorizontalScrollbar())}function sizeHorizontalScrollbar(){container.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){horizontalTrackWidth-=$(this).outerWidth()}),horizontalTrack.width(horizontalTrackWidth+"px"),horizontalDragPosition=0}function resizeScrollbars(){if(isScrollableH&&isScrollableV){var horizontalTrackHeight=horizontalTrack.outerHeight(),verticalTrackWidth=verticalTrack.outerWidth();verticalTrackHeight-=horizontalTrackHeight,$(horizontalBar).find(">.jspCap:visible,>.jspArrow").each(function(){horizontalTrackWidth+=$(this).outerWidth()}),horizontalTrackWidth-=verticalTrackWidth,paneHeight-=verticalTrackWidth,paneWidth-=horizontalTrackHeight,horizontalTrack.parent().append($('<div class="jspCorner" />').css("width",horizontalTrackHeight+"px")),sizeVerticalScrollbar(),sizeHorizontalScrollbar()}isScrollableH&&pane.width(container.outerWidth()-originalPaddingTotalWidth+"px"),contentHeight=pane.outerHeight(),percentInViewV=contentHeight/paneHeight,isScrollableH&&(horizontalDragWidth=Math.ceil(1/percentInViewH*horizontalTrackWidth),horizontalDragWidth>settings.horizontalDragMaxWidth?horizontalDragWidth=settings.horizontalDragMaxWidth:horizontalDragWidth<settings.horizontalDragMinWidth&&(horizontalDragWidth=settings.horizontalDragMinWidth),horizontalDrag.width(horizontalDragWidth+"px"),dragMaxX=horizontalTrackWidth-horizontalDragWidth,_positionDragX(horizontalDragPosition)),isScrollableV&&(verticalDragHeight=Math.ceil(1/percentInViewV*verticalTrackHeight),verticalDragHeight>settings.verticalDragMaxHeight?verticalDragHeight=settings.verticalDragMaxHeight:verticalDragHeight<settings.verticalDragMinHeight&&(verticalDragHeight=settings.verticalDragMinHeight),verticalDrag.height(verticalDragHeight+"px"),dragMaxY=verticalTrackHeight-verticalDragHeight,_positionDragY(verticalDragPosition))}function appendArrows(ele,p,a1,a2){var aTemp,p1="before",p2="after";"os"==p&&(p=/Mac/.test(navigator.platform)?"after":"split"),p==p1?p2=p:p==p2&&(p1=p,aTemp=a1,a1=a2,a2=aTemp),ele[p1](a1)[p2](a2)}function getArrowScroll(dirX,dirY,ele){return function(){return arrowScroll(dirX,dirY,this,ele),this.blur(),!1}}function arrowScroll(dirX,dirY,arrow,ele){arrow=$(arrow).addClass("jspActive");var eve,scrollTimeout,isFirst=!0,doScroll=function(){0!==dirX&&jsp.scrollByX(dirX*settings.arrowButtonSpeed),0!==dirY&&jsp.scrollByY(dirY*settings.arrowButtonSpeed),scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.arrowRepeatFreq),isFirst=!1};doScroll(),eve=ele?"mouseout.jsp":"mouseup.jsp",ele=ele||$("html"),ele.bind(eve,function(){arrow.removeClass("jspActive"),scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,ele.unbind(eve)})}function initClickOnTrack(){removeClickOnTrack(),isScrollableV&&verticalTrack.bind("mousedown.jsp",function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var scrollTimeout,clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageY-offset.top-verticalDragPosition,isFirst=!0,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageY-offset.top-verticalDragHeight/2,contentDragY=paneHeight*settings.scrollPagePercent,dragY=dragMaxY*contentDragY/(contentHeight-paneHeight);if(0>direction)verticalDragPosition-dragY>pos?jsp.scrollByY(-contentDragY):positionDragY(pos);else{if(!(direction>0))return void cancelClick();pos>verticalDragPosition+dragY?jsp.scrollByY(contentDragY):positionDragY(pos)}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq),isFirst=!1},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,$(document).unbind("mouseup.jsp",cancelClick)};return doScroll(),$(document).bind("mouseup.jsp",cancelClick),!1}}),isScrollableH&&horizontalTrack.bind("mousedown.jsp",function(e){if(e.originalTarget===undefined||e.originalTarget==e.currentTarget){var scrollTimeout,clickedTrack=$(this),offset=clickedTrack.offset(),direction=e.pageX-offset.left-horizontalDragPosition,isFirst=!0,doScroll=function(){var offset=clickedTrack.offset(),pos=e.pageX-offset.left-horizontalDragWidth/2,contentDragX=paneWidth*settings.scrollPagePercent,dragX=dragMaxX*contentDragX/(contentWidth-paneWidth);if(0>direction)horizontalDragPosition-dragX>pos?jsp.scrollByX(-contentDragX):positionDragX(pos);else{if(!(direction>0))return void cancelClick();pos>horizontalDragPosition+dragX?jsp.scrollByX(contentDragX):positionDragX(pos)}scrollTimeout=setTimeout(doScroll,isFirst?settings.initialDelay:settings.trackClickRepeatFreq),isFirst=!1},cancelClick=function(){scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=null,$(document).unbind("mouseup.jsp",cancelClick)};return doScroll(),$(document).bind("mouseup.jsp",cancelClick),!1}})}function removeClickOnTrack(){horizontalTrack&&horizontalTrack.unbind("mousedown.jsp"),verticalTrack&&verticalTrack.unbind("mousedown.jsp")}function cancelDrag(){$("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),verticalDrag&&verticalDrag.removeClass("jspActive"),horizontalDrag&&horizontalDrag.removeClass("jspActive")}function positionDragY(destY,animate){isScrollableV&&(0>destY?destY=0:destY>dragMaxY&&(destY=dragMaxY),animate===undefined&&(animate=settings.animateScroll),animate?jsp.animate(verticalDrag,"top",destY,_positionDragY):(verticalDrag.css("top",destY),_positionDragY(destY)))}function _positionDragY(destY){destY===undefined&&(destY=verticalDrag.position().top),container.scrollTop(0),verticalDragPosition=destY||0;var isAtTop=0===verticalDragPosition,isAtBottom=verticalDragPosition==dragMaxY,percentScrolled=destY/dragMaxY,destTop=-percentScrolled*(contentHeight-paneHeight);(wasAtTop!=isAtTop||wasAtBottom!=isAtBottom)&&(wasAtTop=isAtTop,wasAtBottom=isAtBottom,elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])),updateVerticalArrows(isAtTop,isAtBottom),pane.css("top",destTop),elem.trigger("jsp-scroll-y",[-destTop,isAtTop,isAtBottom]).trigger("scroll")}function positionDragX(destX,animate){isScrollableH&&(0>destX?destX=0:destX>dragMaxX&&(destX=dragMaxX),animate===undefined&&(animate=settings.animateScroll),animate?jsp.animate(horizontalDrag,"left",destX,_positionDragX):(horizontalDrag.css("left",destX),_positionDragX(destX)))}function _positionDragX(destX){destX===undefined&&(destX=horizontalDrag.position().left),container.scrollTop(0),horizontalDragPosition=destX||0;var isAtLeft=0===horizontalDragPosition,isAtRight=horizontalDragPosition==dragMaxX,percentScrolled=destX/dragMaxX,destLeft=-percentScrolled*(contentWidth-paneWidth);(wasAtLeft!=isAtLeft||wasAtRight!=isAtRight)&&(wasAtLeft=isAtLeft,wasAtRight=isAtRight,elem.trigger("jsp-arrow-change",[wasAtTop,wasAtBottom,wasAtLeft,wasAtRight])),updateHorizontalArrows(isAtLeft,isAtRight),pane.css("left",destLeft),elem.trigger("jsp-scroll-x",[-destLeft,isAtLeft,isAtRight]).trigger("scroll")}function updateVerticalArrows(isAtTop,isAtBottom){settings.showArrows&&(arrowUp[isAtTop?"addClass":"removeClass"]("jspDisabled"),arrowDown[isAtBottom?"addClass":"removeClass"]("jspDisabled"))}function updateHorizontalArrows(isAtLeft,isAtRight){settings.showArrows&&(arrowLeft[isAtLeft?"addClass":"removeClass"]("jspDisabled"),arrowRight[isAtRight?"addClass":"removeClass"]("jspDisabled"))}function scrollToY(destY,animate){var percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)}function scrollToX(destX,animate){var percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)}function scrollToElement(ele,stickToTop,animate){var e,eleHeight,eleWidth,viewportTop,viewportLeft,maxVisibleEleTop,maxVisibleEleLeft,destY,destX,eleTop=0,eleLeft=0;try{e=$(ele)}catch(err){return}for(eleHeight=e.outerHeight(),eleWidth=e.outerWidth(),container.scrollTop(0),container.scrollLeft(0);!e.is(".jspPane");)if(eleTop+=e.position().top,eleLeft+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;viewportTop=contentPositionY(),maxVisibleEleTop=viewportTop+paneHeight,viewportTop>eleTop||stickToTop?destY=eleTop-settings.horizontalGutter:eleTop+eleHeight>maxVisibleEleTop&&(destY=eleTop-paneHeight+eleHeight+settings.horizontalGutter),isNaN(destY)||scrollToY(destY,animate),viewportLeft=contentPositionX(),maxVisibleEleLeft=viewportLeft+paneWidth,viewportLeft>eleLeft||stickToTop?destX=eleLeft-settings.horizontalGutter:eleLeft+eleWidth>maxVisibleEleLeft&&(destX=eleLeft-paneWidth+eleWidth+settings.horizontalGutter),isNaN(destX)||scrollToX(destX,animate)}function contentPositionX(){return-pane.position().left}function contentPositionY(){return-pane.position().top}function isCloseToBottom(){var scrollableHeight=contentHeight-paneHeight;return scrollableHeight>20&&scrollableHeight-contentPositionY()<10}function isCloseToRight(){var scrollableWidth=contentWidth-paneWidth;return scrollableWidth>20&&scrollableWidth-contentPositionX()<10}function initMousewheel(){container.unbind(mwEvent).bind(mwEvent,function(event,delta,deltaX,deltaY){horizontalDragPosition||(horizontalDragPosition=0),verticalDragPosition||(verticalDragPosition=0);var dX=horizontalDragPosition,dY=verticalDragPosition,factor=event.deltaFactor||settings.mouseWheelSpeed;return jsp.scrollBy(deltaX*factor,-deltaY*factor,!1),dX==horizontalDragPosition&&dY==verticalDragPosition})}function removeMousewheel(){container.unbind(mwEvent)}function nil(){return!1}function initFocusHandler(){pane.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){scrollToElement(e.target,!1)})}function removeFocusHandler(){pane.find(":input,a").unbind("focus.jsp")}function initKeyboardNav(){function keyDownHandler(){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(keyDown){case 40:jsp.scrollByY(settings.keyboardSpeed,!1);break;case 38:jsp.scrollByY(-settings.keyboardSpeed,!1);break;case 34:case 32:jsp.scrollByY(paneHeight*settings.scrollPagePercent,!1);break;case 33:jsp.scrollByY(-paneHeight*settings.scrollPagePercent,!1);break;case 39:jsp.scrollByX(settings.keyboardSpeed,!1);break;case 37:jsp.scrollByX(-settings.keyboardSpeed,!1)}return elementHasScrolled=dX!=horizontalDragPosition||dY!=verticalDragPosition}var keyDown,elementHasScrolled,validParents=[];isScrollableH&&validParents.push(horizontalBar[0]),isScrollableV&&validParents.push(verticalBar[0]),pane.focus(function(){elem.focus()}),elem.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||validParents.length&&$(e.target).closest(validParents).length){var dX=horizontalDragPosition,dY=verticalDragPosition;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:keyDown=e.keyCode,keyDownHandler();break;case 35:scrollToY(contentHeight-paneHeight),keyDown=null;break;case 36:scrollToY(0),keyDown=null}return elementHasScrolled=e.keyCode==keyDown&&dX!=horizontalDragPosition||dY!=verticalDragPosition,!elementHasScrolled}}).bind("keypress.jsp",function(e){return e.keyCode==keyDown&&keyDownHandler(),!elementHasScrolled}),settings.hideFocus?(elem.css("outline","none"),"hideFocus"in container[0]&&elem.attr("hideFocus",!0)):(elem.css("outline",""),"hideFocus"in container[0]&&elem.attr("hideFocus",!1))}function removeKeyboardNav(){elem.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function observeHash(){if(location.hash&&location.hash.length>1){var e,retryInt,hash=escape(location.hash.substr(1));try{e=$("#"+hash+', a[name="'+hash+'"]')}catch(err){return}e.length&&pane.find(hash)&&(0===container.scrollTop()?retryInt=setInterval(function(){container.scrollTop()>0&&(scrollToElement(e,!0),$(document).scrollTop(container.position().top),clearInterval(retryInt))},50):(scrollToElement(e,!0),$(document).scrollTop(container.position().top)))}}function hijackInternalLinks(){$(document.body).data("jspHijack")||($(document.body).data("jspHijack",!0),$(document.body).delegate("a[href*=#]","click",function(event){var hash,element,container,jsp,scrollTop,elementTop,href=this.href.substr(0,this.href.indexOf("#")),locationHref=location.href;if(-1!==location.href.indexOf("#")&&(locationHref=location.href.substr(0,location.href.indexOf("#"))),href===locationHref){hash=escape(this.href.substr(this.href.indexOf("#")+1));try{element=$("#"+hash+', a[name="'+hash+'"]')}catch(e){return}element.length&&(container=element.closest(".jspScrollable"),jsp=container.data("jsp"),jsp.scrollToElement(element,!0),container[0].scrollIntoView&&(scrollTop=$(window).scrollTop(),elementTop=element.offset().top,(scrollTop>elementTop||elementTop>scrollTop+$(window).height())&&container[0].scrollIntoView()),event.preventDefault())}}))}function initTouch(){var startX,startY,touchStartX,touchStartY,moved,moving=!1;container.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var touch=e.originalEvent.touches[0];startX=contentPositionX(),startY=contentPositionY(),touchStartX=touch.pageX,touchStartY=touch.pageY,moved=!1,moving=!0}).bind("touchmove.jsp",function(ev){if(moving){var touchPos=ev.originalEvent.touches[0],dX=horizontalDragPosition,dY=verticalDragPosition;return jsp.scrollTo(startX+touchStartX-touchPos.pageX,startY+touchStartY-touchPos.pageY),moved=moved||Math.abs(touchStartX-touchPos.pageX)>5||Math.abs(touchStartY-touchPos.pageY)>5,dX==horizontalDragPosition&&dY==verticalDragPosition}}).bind("touchend.jsp",function(){moving=!1}).bind("click.jsp-touchclick",function(){return moved?(moved=!1,!1):void 0})}function destroy(){var currentY=contentPositionY(),currentX=contentPositionX();elem.removeClass("jspScrollable").unbind(".jsp"),elem.replaceWith(originalElement.append(pane.children())),originalElement.scrollTop(currentY),originalElement.scrollLeft(currentX),reinitialiseInterval&&clearInterval(reinitialiseInterval)}var settings,pane,paneWidth,paneHeight,container,contentWidth,contentHeight,percentInViewH,percentInViewV,isScrollableV,isScrollableH,verticalDrag,dragMaxY,verticalDragPosition,horizontalDrag,dragMaxX,horizontalDragPosition,verticalBar,verticalTrack,scrollbarWidth,verticalTrackHeight,verticalDragHeight,arrowUp,arrowDown,horizontalBar,horizontalTrack,horizontalTrackWidth,horizontalDragWidth,arrowLeft,arrowRight,reinitialiseInterval,originalPadding,originalPaddingTotalWidth,previousContentWidth,jsp=this,wasAtTop=!0,wasAtLeft=!0,wasAtBottom=!1,wasAtRight=!1,originalElement=elem.clone(!1,!1).empty(),mwEvent=$.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===elem.css("box-sizing")?(originalPadding=0,originalPaddingTotalWidth=0):(originalPadding=elem.css("paddingTop")+" "+elem.css("paddingRight")+" "+elem.css("paddingBottom")+" "+elem.css("paddingLeft"),originalPaddingTotalWidth=(parseInt(elem.css("paddingLeft"),10)||0)+(parseInt(elem.css("paddingRight"),10)||0)),$.extend(jsp,{reinitialise:function(s){s=$.extend({},settings,s),initialise(s)},scrollToElement:function(ele,stickToTop,animate){scrollToElement(ele,stickToTop,animate)},scrollTo:function(destX,destY,animate){scrollToX(destX,animate),scrollToY(destY,animate)},scrollToX:function(destX,animate){scrollToX(destX,animate)},scrollToY:function(destY,animate){scrollToY(destY,animate)},scrollToPercentX:function(destPercentX,animate){scrollToX(destPercentX*(contentWidth-paneWidth),animate)},scrollToPercentY:function(destPercentY,animate){scrollToY(destPercentY*(contentHeight-paneHeight),animate)},scrollBy:function(deltaX,deltaY,animate){jsp.scrollByX(deltaX,animate),jsp.scrollByY(deltaY,animate)},scrollByX:function(deltaX,animate){var destX=contentPositionX()+Math[0>deltaX?"floor":"ceil"](deltaX),percentScrolled=destX/(contentWidth-paneWidth);positionDragX(percentScrolled*dragMaxX,animate)},scrollByY:function(deltaY,animate){var destY=contentPositionY()+Math[0>deltaY?"floor":"ceil"](deltaY),percentScrolled=destY/(contentHeight-paneHeight);positionDragY(percentScrolled*dragMaxY,animate)},positionDragX:function(x,animate){positionDragX(x,animate)},positionDragY:function(y,animate){positionDragY(y,animate)},animate:function(ele,prop,value,stepCallback){var params={};params[prop]=value,ele.animate(params,{duration:settings.animateDuration,easing:settings.animateEase,queue:!1,step:stepCallback})},getContentPositionX:function(){return contentPositionX()},getContentPositionY:function(){return contentPositionY()},getContentWidth:function(){return contentWidth},getContentHeight:function(){return contentHeight},getPercentScrolledX:function(){return contentPositionX()/(contentWidth-paneWidth)},getPercentScrolledY:function(){return contentPositionY()/(contentHeight-paneHeight)},getIsScrollableH:function(){return isScrollableH},getIsScrollableV:function(){return isScrollableV},getContentPane:function(){return pane},scrollToBottom:function(animate){positionDragY(dragMaxY,animate)},hijackInternalLinks:$.noop,destroy:function(){destroy()}}),initialise(s)}return settings=$.extend({},$.fn.jScrollPane.defaults,settings),$.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){settings[this]=settings[this]||settings.speed}),this.each(function(){var elem=$(this),jspApi=elem.data("jsp");jspApi?jspApi.reinitialise(settings):($("script",elem).filter('[type="text/javascript"],:not([type])').remove(),jspApi=new JScrollPane(elem,settings),elem.data("jsp",jspApi))})},$.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:undefined,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}},this),function(window){function noop(){}function defineBridget($){function addOptionMethod(PluginClass){PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))})}function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if("string"==typeof options){for(var args=slice.call(arguments,1),i=0,len=this.length;len>i;i++){var elem=this[i],instance=$.data(elem,namespace);if(instance)if($.isFunction(instance[options])&&"_"!==options.charAt(0)){var returnValue=instance[options].apply(instance,args);if(void 0!==returnValue)return returnValue}else logError("no such method '"+options+"' for "+namespace+" instance");else logError("cannot call methods on "+namespace+" prior to initialization; attempted to call '"+options+"'")}return this}return this.each(function(){var instance=$.data(this,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(this,options),$.data(this,namespace,instance))})}}if($){var logError="undefined"==typeof console?noop:function(message){console.error(message)};return $.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass),bridge(namespace,PluginClass)},$.bridget}}var slice=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],defineBridget):defineBridget("object"==typeof exports?require("jquery"):window.jQuery)}(window),function(window){function getIEEvent(obj){var event=window.event;return event.target=event.target||event.srcElement||obj,event}var docElem=document.documentElement,bind=function(){};docElem.addEventListener?bind=function(obj,type,fn){obj.addEventListener(type,fn,!1)}:docElem.attachEvent&&(bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)},obj.attachEvent("on"+type,obj[type+fn])});var unbind=function(){};docElem.removeEventListener?unbind=function(obj,type,fn){obj.removeEventListener(type,fn,!1)}:docElem.detachEvent&&(unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=void 0}});var eventie={bind:bind,unbind:unbind};"function"==typeof define&&define.amd?define("eventie/eventie",eventie):"object"==typeof exports?module.exports=eventie:window.eventie=eventie}(window),function(){function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var proto=EventEmitter.prototype,exports=this,originalGlobalValue=exports.EventEmitter;proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"==typeof listener;for(key in listeners)listeners.hasOwnProperty(key)&&-1===indexOfListener(listeners[key],listener)&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),-1!==index&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!=typeof evt||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type=typeof evt,events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listener,i,key,response,listeners=this.getListenersAsObject(evt);for(key in listeners)if(listeners.hasOwnProperty(key))for(i=listeners[key].length;i--;)listener=listeners[key][i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return EventEmitter}):"object"==typeof module&&module.exports?module.exports=EventEmitter:exports.EventEmitter=EventEmitter}.call(this),function(window){function getStyleProperty(propName){if(propName){if("string"==typeof docElemStyle[propName])return propName;propName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var prefixed,i=0,len=prefixes.length;len>i;i++)if(prefixed=prefixes[i]+propName,"string"==typeof docElemStyle[prefixed])return prefixed}}var prefixes="Webkit Moz ms Ms O".split(" "),docElemStyle=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return getStyleProperty}):"object"==typeof exports?module.exports=getStyleProperty:window.getStyleProperty=getStyleProperty}(window),function(window){function getStyleSize(value){var num=parseFloat(value),isValid=-1===value.indexOf("%")&&!isNaN(num);return isValid&&num}function noop(){}function getZeroSize(){for(var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0,len=measurements.length;len>i;i++){var measurement=measurements[i];size[measurement]=0}return size}function defineGetSize(getStyleProperty){function setup(){if(!isSetup){isSetup=!0;var getComputedStyle=window.getComputedStyle;if(getStyle=function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};return function(elem){var style=getStyleFn(elem);return style||logError("Style returned "+style+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),style}}(),boxSizingProp=getStyleProperty("boxSizing")){var div=document.createElement("div");div.style.width="200px",div.style.padding="1px 2px 3px 4px",div.style.borderStyle="solid",div.style.borderWidth="1px 2px 3px 4px",div.style[boxSizingProp]="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=200===getStyleSize(style.width),body.removeChild(div)}}}function getSize(elem){if(setup(),"string"==typeof elem&&(elem=document.querySelector(elem)),elem&&"object"==typeof elem&&elem.nodeType){var style=getStyle(elem);
if("none"===style.display)return getZeroSize();var size={};size.width=elem.offsetWidth,size.height=elem.offsetHeight;for(var isBorderBox=size.isBorderBox=!(!boxSizingProp||!style[boxSizingProp]||"border-box"!==style[boxSizingProp]),i=0,len=measurements.length;len>i;i++){var measurement=measurements[i],value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=isNaN(num)?0:num}var paddingWidth=size.paddingLeft+size.paddingRight,paddingHeight=size.paddingTop+size.paddingBottom,marginWidth=size.marginLeft+size.marginRight,marginHeight=size.marginTop+size.marginBottom,borderWidth=size.borderLeftWidth+size.borderRightWidth,borderHeight=size.borderTopWidth+size.borderBottomWidth,isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter,styleWidth=getStyleSize(style.width);styleWidth!==!1&&(size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth));var styleHeight=getStyleSize(style.height);return styleHeight!==!1&&(size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)),size.innerWidth=size.width-(paddingWidth+borderWidth),size.innerHeight=size.height-(paddingHeight+borderHeight),size.outerWidth=size.width+marginWidth,size.outerHeight=size.height+marginHeight,size}}function mungeNonPixel(elem,value){if(window.getComputedStyle||-1===value.indexOf("%"))return value;var style=elem.style,left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left;return rsLeft&&(rs.left=elem.currentStyle.left),style.left=value,value=style.pixelLeft,style.left=left,rsLeft&&(rs.left=rsLeft),value}var getStyle,boxSizingProp,isBoxSizeOuter,isSetup=!1;return getSize}var logError="undefined"==typeof console?noop:function(message){console.error(message)},measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],defineGetSize):"object"==typeof exports?module.exports=defineGetSize(require("desandro-get-style-property")):window.getSize=defineGetSize(window.getStyleProperty)}(window),function(window){function docReady(fn){"function"==typeof fn&&(docReady.isReady?fn():queue.push(fn))}function onReady(event){var isIE8NotReady="readystatechange"===event.type&&"complete"!==document.readyState;docReady.isReady||isIE8NotReady||trigger()}function trigger(){docReady.isReady=!0;for(var i=0,len=queue.length;len>i;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){return"complete"===document.readyState?trigger():(eventie.bind(document,"DOMContentLoaded",onReady),eventie.bind(document,"readystatechange",onReady),eventie.bind(window,"load",onReady)),docReady}var document=window.document,queue=[];docReady.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],defineDocReady):"object"==typeof exports?module.exports=defineDocReady(require("eventie")):window.docReady=defineDocReady(window.eventie)}(window),function(ElemProto){function match(elem,selector){return elem[matchesMethod](selector)}function checkParent(elem){if(!elem.parentNode){var fragment=document.createDocumentFragment();fragment.appendChild(elem)}}function query(elem,selector){checkParent(elem);for(var elems=elem.parentNode.querySelectorAll(selector),i=0,len=elems.length;len>i;i++)if(elems[i]===elem)return!0;return!1}function matchChild(elem,selector){return checkParent(elem),match(elem,selector)}var matchesSelector,matchesMethod=function(){if(ElemProto.matches)return"matches";if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0,len=prefixes.length;len>i;i++){var prefix=prefixes[i],method=prefix+"MatchesSelector";if(ElemProto[method])return method}}();if(matchesMethod){var div=document.createElement("div"),supportsOrphans=match(div,"div");matchesSelector=supportsOrphans?match:matchChild}else matchesSelector=query;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return matchesSelector}):"object"==typeof exports?module.exports=matchesSelector:window.matchesSelector=matchesSelector}(Element.prototype),function(window,factory){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(docReady,matchesSelector){return factory(window,docReady,matchesSelector)}):"object"==typeof exports?module.exports=factory(window,require("doc-ready"),require("desandro-matches-selector")):window.fizzyUIUtils=factory(window,window.docReady,window.matchesSelector)}(window,function(window,docReady,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b)a[prop]=b[prop];return a},utils.modulo=function(num,div){return(num%div+div)%div};var objToString=Object.prototype.toString;utils.isArray=function(obj){return"[object Array]"==objToString.call(obj)},utils.makeArray=function(obj){var ary=[];if(utils.isArray(obj))ary=obj;else if(obj&&"number"==typeof obj.length)for(var i=0,len=obj.length;len>i;i++)ary.push(obj[i]);else ary.push(obj);return ary},utils.indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;len>i;i++)if(ary[i]===obj)return i;return-1},utils.removeFrom=function(ary,obj){var index=utils.indexOf(ary,obj);-1!=index&&ary.splice(index,1)},utils.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(obj){return obj instanceof HTMLElement}:function(obj){return obj&&"object"==typeof obj&&1==obj.nodeType&&"string"==typeof obj.nodeName},utils.setText=function(){function setText(elem,text){setTextProperty=setTextProperty||(void 0!==document.documentElement.textContent?"textContent":"innerText"),elem[setTextProperty]=text}var setTextProperty;return setText}(),utils.getParent=function(elem,selector){for(;elem!=document.body;)if(elem=elem.parentNode,matchesSelector(elem,selector))return elem},utils.getQueryElement=function(elem){return"string"==typeof elem?document.querySelector(elem):elem},utils.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);for(var ffElems=[],i=0,len=elems.length;len>i;i++){var elem=elems[i];if(utils.isElement(elem))if(selector){matchesSelector(elem,selector)&&ffElems.push(elem);for(var childElems=elem.querySelectorAll(selector),j=0,jLen=childElems.length;jLen>j;j++)ffElems.push(childElems[j])}else ffElems.push(elem)}return ffElems},utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName],timeoutName=methodName+"Timeout";_class.prototype[methodName]=function(){var timeout=this[timeoutName];timeout&&clearTimeout(timeout);var args=arguments,_this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args),delete _this[timeoutName]},threshold||100)}},utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()};var console=window.console;return utils.htmlInit=function(WidgetClass,namespace){docReady(function(){for(var dashedNamespace=utils.toDashed(namespace),elems=document.querySelectorAll(".js-"+dashedNamespace),dataAttr="data-"+dashedNamespace+"-options",i=0,len=elems.length;len>i;i++){var options,elem=elems[i],attr=elem.getAttribute(dataAttr);try{options=attr&&JSON.parse(attr)}catch(error){console&&console.error("Error parsing "+dataAttr+" on "+elem.nodeName.toLowerCase()+(elem.id?"#"+elem.id:"")+": "+error);continue}var instance=new WidgetClass(elem,options),jQuery=window.jQuery;jQuery&&jQuery.data(elem,namespace,instance)}})},utils}),function(window,factory){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(EventEmitter,getSize,getStyleProperty,utils){return factory(window,EventEmitter,getSize,getStyleProperty,utils)}):"object"==typeof exports?module.exports=factory(window,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(window.Outlayer={},window.Outlayer.Item=factory(window,window.EventEmitter,window.getSize,window.getStyleProperty,window.fizzyUIUtils))}(window,function(window,EventEmitter,getSize,getStyleProperty,utils){function isEmptyObj(obj){for(var prop in obj)return!1;return prop=null,!0}function Item(element,layout){element&&(this.element=element,this.layout=layout,this.position={x:0,y:0},this._create())}var getComputedStyle=window.getComputedStyle,getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle},transitionProperty=getStyleProperty("transition"),transformProperty=getStyleProperty("transform"),supportsCSS3=transitionProperty&&transformProperty,is3d=!!getStyleProperty("perspective"),transitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[transitionProperty],prefixableProperties=["transform","transition","transitionDuration","transitionProperty"],vendorProperties=function(){for(var cache={},i=0,len=prefixableProperties.length;len>i;i++){var prop=prefixableProperties[i],supportedProp=getStyleProperty(prop);supportedProp&&supportedProp!==prop&&(cache[prop]=supportedProp)}return cache}();utils.extend(Item.prototype,EventEmitter.prototype),Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},Item.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Item.prototype.getSize=function(){this.size=getSize(this.element)},Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}},Item.prototype.getPosition=function(){var style=getStyle(this.element),layoutOptions=this.layout.options,isOriginLeft=layoutOptions.isOriginLeft,isOriginTop=layoutOptions.isOriginTop,x=parseInt(style[isOriginLeft?"left":"right"],10),y=parseInt(style[isOriginTop?"top":"bottom"],10);x=isNaN(x)?0:x,y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight,y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom,this.position.x=x,this.position.y=y},Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size,layoutOptions=this.layout.options,style={},xPadding=layoutOptions.isOriginLeft?"paddingLeft":"paddingRight",xProperty=layoutOptions.isOriginLeft?"left":"right",xResetProperty=layoutOptions.isOriginLeft?"right":"left",x=this.position.x+layoutSize[xPadding];x=layoutOptions.percentPosition&&!layoutOptions.isHorizontal?x/layoutSize.width*100+"%":x+"px",style[xProperty]=x,style[xResetProperty]="";var yPadding=layoutOptions.isOriginTop?"paddingTop":"paddingBottom",yProperty=layoutOptions.isOriginTop?"top":"bottom",yResetProperty=layoutOptions.isOriginTop?"bottom":"top",y=this.position.y+layoutSize[yPadding];y=layoutOptions.percentPosition&&layoutOptions.isHorizontal?y/layoutSize.height*100+"%":y+"px",style[yProperty]=y,style[yResetProperty]="",this.css(style),this.emitEvent("layout",[this])};var translate=is3d?function(x,y){return"translate3d("+x+"px, "+y+"px, 0)"}:function(x,y){return"translate("+x+"px, "+y+"px)"};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x,curY=this.position.y,compareX=parseInt(x,10),compareY=parseInt(y,10),didNotMove=compareX===this.position.x&&compareY===this.position.y;if(this.setPosition(x,y),didNotMove&&!this.isTransitioning)return void this.layoutPosition();var transX=x-curX,transY=y-curY,transitionStyle={},layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX,transY=layoutOptions.isOriginTop?transY:-transY,transitionStyle.transform=translate(transX,transY),this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},Item.prototype.goTo=function(x,y){this.setPosition(x,y),this.layoutPosition()},Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo,Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10),this.position.y=parseInt(y,10)},Item.prototype._nonTransition=function(args){this.css(args.to),args.isCleaning&&this._removeStyles(args.to);for(var prop in args.onTransitionEnd)args.onTransitionEnd[prop].call(this)},Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(args);var _transition=this._transn;for(var prop in args.onTransitionEnd)_transition.onEnd[prop]=args.onTransitionEnd[prop];for(prop in args.to)_transition.ingProperties[prop]=!0,args.isCleaning&&(_transition.clean[prop]=!0);if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to),this.css(args.to),this.isTransitioning=!0};var itemTransitionProperties=transformProperty&&utils.toDashed(transformProperty)+",opacity";Item.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(transitionEndEvent,this,!1))},Item.prototype.transition=Item.prototype[transitionProperty?"_transition":"_nonTransition"],Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)},Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};Item.prototype.ontransitionend=function(event){if(event.target===this.element){var _transition=this._transn,propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;if(delete _transition.ingProperties[propertyName],isEmptyObj(_transition.ingProperties)&&this.disableTransition(),propertyName in _transition.clean&&(this.element.style[event.propertyName]="",delete _transition.clean[propertyName]),propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this),delete _transition.onEnd[propertyName]}this.emitEvent("transitionEnd",[this])}},Item.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(transitionEndEvent,this,!1),this.isTransitioning=!1},Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style)cleanStyle[prop]="";this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:""};return Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)},Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var _this=this;this.once("transitionEnd",function(){_this.removeElem()}),this.hide()},Item.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var options=this.layout.options,onTransitionEnd={},transitionEndProperty=this.getHideRevealTransitionEndProperty("visibleStyle");onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd,this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},Item.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},Item.prototype.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity)return"opacity";for(var prop in optionStyle)return prop},Item.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var options=this.layout.options,onTransitionEnd={},transitionEndProperty=this.getHideRevealTransitionEndProperty("hiddenStyle");onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd,this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},Item.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},Item.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},Item}),function(window,factory){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(eventie,EventEmitter,getSize,utils,Item){return factory(window,eventie,EventEmitter,getSize,utils,Item)}):"object"==typeof exports?module.exports=factory(window,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):window.Outlayer=factory(window,window.eventie,window.EventEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item)}(window,function(window,eventie,EventEmitter,getSize,utils,Item){function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement)return void(console&&console.error("Bad element for "+this.constructor.namespace+": "+(queryElement||element)));this.element=queryElement,jQuery&&(this.$element=jQuery(this.element)),this.options=utils.extend({},this.constructor.defaults),this.option(options);var id=++GUID;this.element.outlayerGUID=id,instances[id]=this,this._create(),this.options.isInitLayout&&this.layout()}var console=window.console,jQuery=window.jQuery,noop=function(){},GUID=0,instances={};return Outlayer.namespace="outlayer",Outlayer.Item=Item,Outlayer.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},utils.extend(Outlayer.prototype,EventEmitter.prototype),Outlayer.prototype.option=function(opts){utils.extend(this.options,opts)},Outlayer.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),utils.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},Outlayer.prototype._itemize=function(elems){for(var itemElems=this._filterFindItemElements(elems),Item=this.constructor.Item,items=[],i=0,len=itemElems.length;len>i;i++){var elem=itemElems[i],item=new Item(elem,this);items.push(item)}return items},Outlayer.prototype._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector)},Outlayer.prototype.getItemElements=function(){for(var elems=[],i=0,len=this.items.length;len>i;i++)elems.push(this.items[i].element);return elems},Outlayer.prototype.layout=function(){this._resetLayout(),this._manageStamps();var isInstant=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant),this._isLayoutInited=!0},Outlayer.prototype._init=Outlayer.prototype.layout,Outlayer.prototype._resetLayout=function(){this.getSize()},Outlayer.prototype.getSize=function(){this.size=getSize(this.element)},Outlayer.prototype._getMeasurement=function(measurement,size){var elem,option=this.options[measurement];option?("string"==typeof option?elem=this.element.querySelector(option):utils.isElement(option)&&(elem=option),this[measurement]=elem?getSize(elem)[size]:option):this[measurement]=0},Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items),this._layoutItems(items,isInstant),this._postLayout()},Outlayer.prototype._getItemsForLayout=function(items){for(var layoutItems=[],i=0,len=items.length;len>i;i++){var item=items[i];item.isIgnored||layoutItems.push(item)}return layoutItems},Outlayer.prototype._layoutItems=function(items,isInstant){if(this._emitCompleteOnItems("layout",items),items&&items.length){for(var queue=[],i=0,len=items.length;len>i;i++){var item=items[i],position=this._getItemLayoutPosition(item);position.item=item,position.isInstant=isInstant||item.isLayoutInstant,queue.push(position)}this._processLayoutQueue(queue)}},Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;len>i;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}},Outlayer.prototype._positionItem=function(item,x,y,isInstant){isInstant?item.goTo(x,y):item.moveTo(x,y)},Outlayer.prototype._postLayout=function(){this.resizeContainer()},Outlayer.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var size=this._getContainerSize();size&&(this._setContainerMeasure(size.width,!0),this._setContainerMeasure(size.height,!1))}},Outlayer.prototype._getContainerSize=noop,Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(void 0!==measure){var elemSize=this.size;elemSize.isBorderBox&&(measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth),measure=Math.max(measure,0),this.element.style[isWidth?"width":"height"]=measure+"px"}},Outlayer.prototype._emitCompleteOnItems=function(eventName,items){function onComplete(){_this.emitEvent(eventName+"Complete",[items])}function tick(){doneCount++,doneCount===count&&onComplete()}var _this=this,count=items.length;if(!items||!count)return void onComplete();for(var doneCount=0,i=0,len=items.length;len>i;i++){var item=items[i];item.once(eventName,tick)}},Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);item&&(item.isIgnored=!0)},Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);item&&delete item.isIgnored},Outlayer.prototype.stamp=function(elems){if(elems=this._find(elems)){this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];this.ignore(elem)}}},Outlayer.prototype.unstamp=function(elems){if(elems=this._find(elems))for(var i=0,len=elems.length;len>i;i++){var elem=elems[i];utils.removeFrom(this.stamps,elem),this.unignore(elem)}},Outlayer.prototype._find=function(elems){return elems?("string"==typeof elems&&(elems=this.element.querySelectorAll(elems)),elems=utils.makeArray(elems)):void 0},Outlayer.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var i=0,len=this.stamps.length;len>i;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}}},Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect(),size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}},Outlayer.prototype._manageStamp=noop,Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect(),thisRect=this._boundingRect,size=getSize(elem),offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset},Outlayer.prototype.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},Outlayer.prototype.bindResize=function(){this.isResizeBound||(eventie.bind(window,"resize",this),this.isResizeBound=!0)},Outlayer.prototype.unbindResize=function(){this.isResizeBound&&eventie.unbind(window,"resize",this),this.isResizeBound=!1},Outlayer.prototype.onresize=function(){function delayed(){_this.resize(),delete _this.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var _this=this;this.resizeTimeout=setTimeout(delayed,100)},Outlayer.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element),hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth},Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);return items.length&&(this.items=this.items.concat(items)),items},Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);items.length&&(this.layoutItems(items,!0),this.reveal(items))},Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(items.length){var previousItems=this.items.slice(0);this.items=items.concat(previousItems),this._resetLayout(),this._manageStamps(),this.layoutItems(items,!0),this.reveal(items),this.layoutItems(previousItems)}},Outlayer.prototype.reveal=function(items){this._emitCompleteOnItems("reveal",items);for(var len=items&&items.length,i=0;len&&len>i;i++){var item=items[i];item.reveal()}},Outlayer.prototype.hide=function(items){this._emitCompleteOnItems("hide",items);for(var len=items&&items.length,i=0;len&&len>i;i++){var item=items[i];item.hide()}},Outlayer.prototype.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items)},Outlayer.prototype.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items)},Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];if(item.element===elem)return item}},Outlayer.prototype.getItems=function(elems){elems=utils.makeArray(elems);for(var items=[],i=0,len=elems.length;len>i;i++){var elem=elems[i],item=this.getItem(elem);item&&items.push(item)}return items},Outlayer.prototype.remove=function(elems){var removeItems=this.getItems(elems);if(this._emitCompleteOnItems("remove",removeItems),removeItems&&removeItems.length)for(var i=0,len=removeItems.length;len>i;i++){var item=removeItems[i];item.remove(),utils.removeFrom(this.items,item)}},Outlayer.prototype.destroy=function(){var style=this.element.style;style.height="",style.position="",style.width="";for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];item.destroy()}this.unbindResize();var id=this.element.outlayerGUID;delete instances[id],delete this.element.outlayerGUID,jQuery&&jQuery.removeData(this.element,this.constructor.namespace)},Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id]},Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}return Object.create?Layout.prototype=Object.create(Outlayer.prototype):utils.extend(Layout.prototype,Outlayer.prototype),Layout.prototype.constructor=Layout,Layout.defaults=utils.extend({},Outlayer.defaults),utils.extend(Layout.defaults,options),Layout.prototype.settings={},Layout.namespace=namespace,Layout.data=Outlayer.data,Layout.Item=function(){Item.apply(this,arguments)},Layout.Item.prototype=new Item,utils.htmlInit(Layout,namespace),jQuery&&jQuery.bridget&&jQuery.bridget(namespace,Layout),Layout},Outlayer.Item=Item,Outlayer}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],factory):"object"==typeof exports?module.exports=factory(require("outlayer")):(window.Isotope=window.Isotope||{},window.Isotope.Item=factory(window.Outlayer))}(window,function(Outlayer){function Item(){Outlayer.Item.apply(this,arguments)}Item.prototype=new Outlayer.Item,Item.prototype._create=function(){this.id=this.layout.itemGUID++,Outlayer.Item.prototype._create.call(this),this.sortData={}},Item.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var getSortData=this.layout.options.getSortData,sorters=this.layout._sorters;for(var key in getSortData){var sorter=sorters[key];this.sortData[key]=sorter(this.element,this)}}};var _destroy=Item.prototype.destroy;return Item.prototype.destroy=function(){_destroy.apply(this,arguments),this.css({display:""})},Item}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],factory):"object"==typeof exports?module.exports=factory(require("get-size"),require("outlayer")):(window.Isotope=window.Isotope||{},window.Isotope.LayoutMode=factory(window.getSize,window.Outlayer))}(window,function(getSize,Outlayer){function LayoutMode(isotope){this.isotope=isotope,isotope&&(this.options=isotope.options[this.namespace],this.element=isotope.element,this.items=isotope.filteredItems,this.size=isotope.size)}return function(){function getOutlayerMethod(methodName){return function(){return Outlayer.prototype[methodName].apply(this.isotope,arguments)}}for(var facadeMethods=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],i=0,len=facadeMethods.length;len>i;i++){var methodName=facadeMethods[i];LayoutMode.prototype[methodName]=getOutlayerMethod(methodName)}}(),LayoutMode.prototype.needsVerticalResizeLayout=function(){var size=getSize(this.isotope.element),hasSizes=this.isotope.size&&size;return hasSizes&&size.innerHeight!=this.isotope.size.innerHeight},LayoutMode.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},LayoutMode.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},LayoutMode.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},LayoutMode.prototype.getSegmentSize=function(segment,size){var segmentName=segment+size,outerSize="outer"+size;if(this._getMeasurement(segmentName,outerSize),!this[segmentName]){var firstItemSize=this.getFirstItemSize();this[segmentName]=firstItemSize&&firstItemSize[outerSize]||this.isotope.size["inner"+size]}},LayoutMode.prototype.getFirstItemSize=function(){var firstItem=this.isotope.filteredItems[0];return firstItem&&firstItem.element&&getSize(firstItem.element)},LayoutMode.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},LayoutMode.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},LayoutMode.modes={},LayoutMode.create=function(namespace,options){function Mode(){LayoutMode.apply(this,arguments)}return Mode.prototype=new LayoutMode,options&&(Mode.options=options),Mode.prototype.namespace=namespace,LayoutMode.modes[namespace]=Mode,Mode},LayoutMode}),function(window,factory){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],factory):"object"==typeof exports?module.exports=factory(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):window.Masonry=factory(window.Outlayer,window.getSize,window.fizzyUIUtils)}(window,function(Outlayer,getSize,utils){var Masonry=Outlayer.create("masonry");return Masonry.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var i=this.cols;for(this.colYs=[];i--;)this.colYs.push(0);this.maxY=0},Masonry.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var firstItem=this.items[0],firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}var columnWidth=this.columnWidth+=this.gutter,containerWidth=this.containerWidth+this.gutter,cols=containerWidth/columnWidth,excess=columnWidth-containerWidth%columnWidth,mathMethod=excess&&1>excess?"round":"floor";cols=Math[mathMethod](cols),this.cols=Math.max(cols,1)},Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element,size=getSize(container);
this.containerWidth=size&&size.innerWidth},Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth,mathMethod=remainder&&1>remainder?"round":"ceil",colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);for(var colGroup=this._getColGroup(colSpan),minimumY=Math.min.apply(Math,colGroup),shortColIndex=utils.indexOf(colGroup,minimumY),position={x:this.columnWidth*shortColIndex,y:minimumY},setHeight=minimumY+item.size.outerHeight,setSpan=this.cols+1-colGroup.length,i=0;setSpan>i;i++)this.colYs[shortColIndex+i]=setHeight;return position},Masonry.prototype._getColGroup=function(colSpan){if(2>colSpan)return this.colYs;for(var colGroup=[],groupCount=this.cols+1-colSpan,i=0;groupCount>i;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup},Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this._getElementOffset(stamp),firstX=this.options.isOriginLeft?offset.left:offset.right,lastX=firstX+stampSize.outerWidth,firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1,lastCol=Math.min(this.cols-1,lastCol);for(var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight,i=firstCol;lastCol>=i;i++)this.colYs[i]=Math.max(stampMaxY,this.colYs[i])},Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};return this.options.isFitWidth&&(size.width=this._getContainerFitWidth()),size},Masonry.prototype._getContainerFitWidth=function(){for(var unusedCols=0,i=this.cols;--i&&0===this.colYs[i];)unusedCols++;return(this.cols-unusedCols)*this.columnWidth-this.gutter},Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;return this.getContainerWidth(),previousWidth!==this.containerWidth},Masonry}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],factory):"object"==typeof exports?module.exports=factory(require("../layout-mode"),require("masonry-layout")):factory(window.Isotope.LayoutMode,window.Masonry)}(window,function(LayoutMode,Masonry){function extend(a,b){for(var prop in b)a[prop]=b[prop];return a}var MasonryMode=LayoutMode.create("masonry"),_getElementOffset=MasonryMode.prototype._getElementOffset,layout=MasonryMode.prototype.layout,_getMeasurement=MasonryMode.prototype._getMeasurement;extend(MasonryMode.prototype,Masonry.prototype),MasonryMode.prototype._getElementOffset=_getElementOffset,MasonryMode.prototype.layout=layout,MasonryMode.prototype._getMeasurement=_getMeasurement;var measureColumns=MasonryMode.prototype.measureColumns;MasonryMode.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,measureColumns.call(this)};var _manageStamp=MasonryMode.prototype._manageStamp;return MasonryMode.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,_manageStamp.apply(this,arguments)},MasonryMode}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],factory):"object"==typeof exports?module.exports=factory(require("../layout-mode")):factory(window.Isotope.LayoutMode)}(window,function(LayoutMode){var FitRows=LayoutMode.create("fitRows");return FitRows.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},FitRows.prototype._getItemLayoutPosition=function(item){item.getSize();var itemWidth=item.size.outerWidth+this.gutter,containerWidth=this.isotope.size.innerWidth+this.gutter;0!==this.x&&itemWidth+this.x>containerWidth&&(this.x=0,this.y=this.maxY);var position={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+item.size.outerHeight),this.x+=itemWidth,position},FitRows.prototype._getContainerSize=function(){return{height:this.maxY}},FitRows}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],factory):"object"==typeof exports?module.exports=factory(require("../layout-mode")):factory(window.Isotope.LayoutMode)}(window,function(LayoutMode){var Vertical=LayoutMode.create("vertical",{horizontalAlignment:0});return Vertical.prototype._resetLayout=function(){this.y=0},Vertical.prototype._getItemLayoutPosition=function(item){item.getSize();var x=(this.isotope.size.innerWidth-item.size.outerWidth)*this.options.horizontalAlignment,y=this.y;return this.y+=item.size.outerHeight,{x:x,y:y}},Vertical.prototype._getContainerSize=function(){return{height:this.y}},Vertical}),function(window,factory){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){return factory(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode)}):"object"==typeof exports?module.exports=factory(window,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):window.Isotope=factory(window,window.Outlayer,window.getSize,window.matchesSelector,window.fizzyUIUtils,window.Isotope.Item,window.Isotope.LayoutMode)}(window,function(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){function getItemSorter(sortBys,sortAsc){return function(itemA,itemB){for(var i=0,len=sortBys.length;len>i;i++){var sortBy=sortBys[i],a=itemA.sortData[sortBy],b=itemB.sortData[sortBy];if(a>b||b>a){var isAscending=void 0!==sortAsc[sortBy]?sortAsc[sortBy]:sortAsc,direction=isAscending?1:-1;return(a>b?1:-1)*direction}}return 0}}var jQuery=window.jQuery,trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/g,"")},docElem=document.documentElement,getText=docElem.textContent?function(elem){return elem.textContent}:function(elem){return elem.innerText},Isotope=Outlayer.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});Isotope.Item=Item,Isotope.LayoutMode=LayoutMode,Isotope.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),Outlayer.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var name in LayoutMode.modes)this._initLayoutMode(name)},Isotope.prototype.reloadItems=function(){this.itemGUID=0,Outlayer.prototype.reloadItems.call(this)},Isotope.prototype._itemize=function(){for(var items=Outlayer.prototype._itemize.apply(this,arguments),i=0,len=items.length;len>i;i++){var item=items[i];item.id=this.itemGUID++}return this._updateItemsSortData(items),items},Isotope.prototype._initLayoutMode=function(name){var Mode=LayoutMode.modes[name],initialOpts=this.options[name]||{};this.options[name]=Mode.options?utils.extend(Mode.options,initialOpts):initialOpts,this.modes[name]=new Mode(this)},Isotope.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},Isotope.prototype._layout=function(){var isInstant=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,isInstant),this._isLayoutInited=!0},Isotope.prototype.arrange=function(opts){function hideReveal(){_this.reveal(filtered.needReveal),_this.hide(filtered.needHide)}this.option(opts),this._getIsInstant();var filtered=this._filter(this.items);this.filteredItems=filtered.matches;var _this=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(hideReveal):hideReveal(),this._sort(),this._layout()},Isotope.prototype._init=Isotope.prototype.arrange,Isotope.prototype._getIsInstant=function(){var isInstant=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=isInstant,isInstant},Isotope.prototype._bindArrangeComplete=function(){function arrangeParallelCallback(){isLayoutComplete&&isHideComplete&&isRevealComplete&&_this.emitEvent("arrangeComplete",[_this.filteredItems])}var isLayoutComplete,isHideComplete,isRevealComplete,_this=this;this.once("layoutComplete",function(){isLayoutComplete=!0,arrangeParallelCallback()}),this.once("hideComplete",function(){isHideComplete=!0,arrangeParallelCallback()}),this.once("revealComplete",function(){isRevealComplete=!0,arrangeParallelCallback()})},Isotope.prototype._filter=function(items){var filter=this.options.filter;filter=filter||"*";for(var matches=[],hiddenMatched=[],visibleUnmatched=[],test=this._getFilterTest(filter),i=0,len=items.length;len>i;i++){var item=items[i];if(!item.isIgnored){var isMatched=test(item);isMatched&&matches.push(item),isMatched&&item.isHidden?hiddenMatched.push(item):isMatched||item.isHidden||visibleUnmatched.push(item)}}return{matches:matches,needReveal:hiddenMatched,needHide:visibleUnmatched}},Isotope.prototype._getFilterTest=function(filter){return jQuery&&this.options.isJQueryFiltering?function(item){return jQuery(item.element).is(filter)}:"function"==typeof filter?function(item){return filter(item.element)}:function(item){return matchesSelector(item.element,filter)}},Isotope.prototype.updateSortData=function(elems){var items;elems?(elems=utils.makeArray(elems),items=this.getItems(elems)):items=this.items,this._getSorters(),this._updateItemsSortData(items)},Isotope.prototype._getSorters=function(){var getSortData=this.options.getSortData;for(var key in getSortData){var sorter=getSortData[key];this._sorters[key]=mungeSorter(sorter)}},Isotope.prototype._updateItemsSortData=function(items){for(var len=items&&items.length,i=0;len&&len>i;i++){var item=items[i];item.updateSortData()}};var mungeSorter=function(){function mungeSorter(sorter){if("string"!=typeof sorter)return sorter;var args=trim(sorter).split(" "),query=args[0],attrMatch=query.match(/^\[(.+)\]$/),attr=attrMatch&&attrMatch[1],getValue=getValueGetter(attr,query),parser=Isotope.sortDataParsers[args[1]];return sorter=parser?function(elem){return elem&&parser(getValue(elem))}:function(elem){return elem&&getValue(elem)}}function getValueGetter(attr,query){var getValue;return getValue=attr?function(elem){return elem.getAttribute(attr)}:function(elem){var child=elem.querySelector(query);return child&&getText(child)}}return mungeSorter}();Isotope.sortDataParsers={parseInt:function(val){return parseInt(val,10)},parseFloat:function(val){return parseFloat(val)}},Isotope.prototype._sort=function(){var sortByOpt=this.options.sortBy;if(sortByOpt){var sortBys=[].concat.apply(sortByOpt,this.sortHistory),itemSorter=getItemSorter(sortBys,this.options.sortAscending);this.filteredItems.sort(itemSorter),sortByOpt!=this.sortHistory[0]&&this.sortHistory.unshift(sortByOpt)}},Isotope.prototype._mode=function(){var layoutMode=this.options.layoutMode,mode=this.modes[layoutMode];if(!mode)throw new Error("No layout mode: "+layoutMode);return mode.options=this.options[layoutMode],mode},Isotope.prototype._resetLayout=function(){Outlayer.prototype._resetLayout.call(this),this._mode()._resetLayout()},Isotope.prototype._getItemLayoutPosition=function(item){return this._mode()._getItemLayoutPosition(item)},Isotope.prototype._manageStamp=function(stamp){this._mode()._manageStamp(stamp)},Isotope.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},Isotope.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},Isotope.prototype.appended=function(elems){var items=this.addItems(elems);if(items.length){var filteredItems=this._filterRevealAdded(items);this.filteredItems=this.filteredItems.concat(filteredItems)}},Isotope.prototype.prepended=function(elems){var items=this._itemize(elems);if(items.length){this._resetLayout(),this._manageStamps();var filteredItems=this._filterRevealAdded(items);this.layoutItems(this.filteredItems),this.filteredItems=filteredItems.concat(this.filteredItems),this.items=items.concat(this.items)}},Isotope.prototype._filterRevealAdded=function(items){var filtered=this._filter(items);return this.hide(filtered.needHide),this.reveal(filtered.matches),this.layoutItems(filtered.matches,!0),filtered.matches},Isotope.prototype.insert=function(elems){var items=this.addItems(elems);if(items.length){var i,item,len=items.length;for(i=0;len>i;i++)item=items[i],this.element.appendChild(item.element);var filteredInsertItems=this._filter(items).matches;for(i=0;len>i;i++)items[i].isLayoutInstant=!0;for(this.arrange(),i=0;len>i;i++)delete items[i].isLayoutInstant;this.reveal(filteredInsertItems)}};var _remove=Isotope.prototype.remove;return Isotope.prototype.remove=function(elems){elems=utils.makeArray(elems);var removeItems=this.getItems(elems);_remove.call(this,elems);var len=removeItems&&removeItems.length;if(len)for(var i=0;len>i;i++){var item=removeItems[i];utils.removeFrom(this.filteredItems,item)}},Isotope.prototype.shuffle=function(){for(var i=0,len=this.items.length;len>i;i++){var item=this.items[i];item.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},Isotope.prototype._noTransition=function(fn){var transitionDuration=this.options.transitionDuration;this.options.transitionDuration=0;var returnValue=fn.call(this);return this.options.transitionDuration=transitionDuration,returnValue},Isotope.prototype.getFilteredItemElements=function(){for(var elems=[],i=0,len=this.filteredItems.length;len>i;i++)elems.push(this.filteredItems[i].element);return elems},Isotope}),function($){var checkCheckboxLists=function(){$(".checkbox-list label").each(function(){$(":checked",this).length?$(this).addClass("active"):$(this).removeClass("active")})},checkCompletion=function(){for(var complete_count=0,vals=["#firstname","#surname","#photo","#gender","#experience","#region","#achievements","#statement"],checks_count=0,i=0;i<vals.length;i++){checks_count++;var v=$(vals[i]).val();""!==v&&"null"!==v&&complete_count++}$(".checkbox-list").each(function(){checks_count++,$(":checkbox:checked",this).length&&complete_count++});for(var j=1;3>=j;j++)checks_count++,""!==$("#showcase"+j+"_title").val()&&complete_count++,checks_count++,""!==$("#showcase"+j+"_text").val()&&complete_count++,checks_count++,(""!==$("#showcase"+j+"_image").val()||""!==$("#showcase"+j+"_file").val()||""!==$("#showcase"+j+"_video").val())&&complete_count++;var complete_pc=complete_count===checks_count?"100%":Math.floor(complete_count/checks_count*100)+"%";$(".completion-meter span").css({width:complete_pc})},checkName=function(){return""===$.trim($("#firstname").val())||""===$.trim($("#surname").val())?!1:!0},applyFilters=function(){if(hasFilters()){var filters=$("#profile-filters").data("filters");$(".ltp-profiles").isotope({filter:function(){var hits=0,toShow=!1,filterCount=0;for(var filter in filters){filterCount++,toShow=!1;for(var i=0;i<filters[filter].length;i++)$(this).hasClass(filters[filter][i])&&(toShow=!0);toShow&&hits++}return hits==filterCount?!0:!1}}),$(".ltp-profiles").isotope("once","arrangeComplete",function(filteredItems){filteredItems.length||$("#no-filtered-profiles").show()})}},removeFilters=function(){$(".ltp-profiles p.message").remove(),$(".ltp-profiles").isotope({filter:"*"}),rearrangeProfiles("removeFilters")},loadFilters=function(){var filters=$.cookie("ltp-filters");if("undefined"!=typeof filters){$("#profile-filters :checkbox").prop("checked",!1);for(var f in filters)for(var i=0;i<filters[f].length;i++)$("#"+filters[f][i]).prop("checked",!0)}else filters={};$("#profile-filters").data("filters",filters),updateCurrentFilters()},hasFilters=function(){var filters=$("#profile-filters").data("filters");return"undefined"==typeof filters||$.isEmptyObject(filters)?!1:!0},hasSaved=function(){return $(".ltp-profile-wrap.saved").length?!0:!1},hasLatest=function(){return $(".ltp-profile-wrap.latest").length?!0:!1},updateCurrentFilters=function(){checkCheckboxLists();var filters={},labels={};if($("#profile-filters :checked").each(function(){filters[$(this).attr("name")]||(filters[$(this).attr("name")]=[],labels[$(this).attr("name")]=[]),filters[$(this).attr("name")].push($(this).attr("id")),labels[$(this).attr("name")].push($(this).data("filter-label"))}),$(".current-filters-list").each(function(){$(this).text($(this).data("no-selection"))}),$.isEmptyObject(filters))$("#delete-filters,#apply-filters").hide();else{for(var f in filters)$("#current-filters-"+f).text(labels[f].join(", "));$("#delete-filters,#apply-filters").show()}$("#profile-filters").data("filters",filters),$.cookie("ltp-filters",filters,{expires:30})},rearrangeProfiles=function(){$(".ltp-profiles").isotope("layout")},showSavedProfiles=function(){$("p.message").hide(),$(".ltp-profile-wrap.saved").length?$(".ltp-profiles").isotope({filter:".saved"}):($(".ltp-profiles").isotope({filter:"*"}),$("#no-saved-profiles").show()),hasFilters()?($("#view-all,#view-filtered,#edit-filters").show(),$("#view-saved,#apply-filters,#remove-filters,#show-filters").hide()):($("#view-all,#show-filters").show(),$("#view-saved,#apply-filters,#remove-filters,#view-filtered,#edit-filters").hide()),hasLatest()?$("#view-latest").show():$("#view-latest").hide(),window.location.hash="saved",$("#profile-filters").data("showing","saved")},showFilteredProfiles=function(){$("p.message").hide(),hasSaved()?$("#view-saved").show():$("#view-saved").hide(),hasLatest()?$("#view-latest").show():$("#view-latest").hide(),hasFilters()?(applyFilters(),$("#view-all,#edit-filters,#remove-filters").show(),$("#view-filtered,#apply-filters,#show-filters").hide(),$("#profile-filters").data("showing","filtered"),window.location.hash="filtered"):showAllProfiles()},showLatestProfiles=function(){return $("p.message").hide(),$("#view-latest").hide(),hasLatest()?($(".ltp-profiles").isotope({filter:".latest"}),hasSaved()?$("#view-saved").show():$("#view-saved").hide(),$("#view-all").show(),hasFilters()?($("#view-filtered,#edit-filters").show(),$("#remove-filters,#show-filters,#apply-filters").hide()):($("#show-filters").show(),$("#view-filtered,#apply-filters,#edit-filters,#remove-filters").hide()),$("#profile-filters").data("showing","latest"),void(window.location.hash="latest")):void showAllProfiles()},showAllProfiles=function(){$("p.message").hide(),removeFilters(),hasSaved()?$("#view-saved").show():$("#view-saved").hide(),hasLatest()?$("#view-latest").show():$("#view-latest").hide(),hasFilters()?($("#view-filtered,#edit-filters").show(),$("#view-all,#remove-filters,#show-filters,#apply-filters").hide()):($("#show-filters").show(),$("#view-all,#view-filtered,#apply-filters,#edit-filters,#remove-filters").hide()),$("#profile-filters").data("showing","all"),window.location.hash="all"},loadProfiles=function(){switch(window.location.hash){case"#saved":showSavedProfiles();break;case"#filtered":showFilteredProfiles();break;case"#latest":showLatestProfiles();break;default:showAllProfiles()}};$(".ltp-profiles").isotope({itemSelector:".ltp-profile-wrap",masonry:{columnwidth:function(containerWidth){return containerWidth/3}}}),$.cookie.json=!0,$(".ltp-profile-builder").length&&($(".checkbox-list").jScrollPane({verticalGutter:0}),$(".checkbox-list label").on("click",checkCheckboxLists),checkCheckboxLists(),$("input,textarea,select").on("change",function(){checkCompletion()}),checkCompletion(),$(".ppt-preview-button, .ppt-publish-button").on("click",function(e){return checkName()?void 0:(e.preventDefault(),alert("Please fill in your name"),$("#firstname").focus(),!1)})),$("#profile-filters").length&&(loadFilters(),loadProfiles(),$("#view-saved").on("click",function(e){e.preventDefault(),$("#profile-filters").slideUp(),showSavedProfiles()}),$("#view-all").on("click",function(e){e.preventDefault(),$("#profile-filters").slideUp(),showAllProfiles()}),$("#view-filtered").on("click",function(e){e.preventDefault(),$("#profile-filters").slideUp(),showFilteredProfiles()}),$("#show-filters,#edit-filters").on("click",function(e){e.preventDefault(),updateCurrentFilters(),$("#profile-filters").slideDown(function(){hasFilters()?($("#apply-filters").show(),$("#delete-filters").show()):($("#apply-filters").hide(),$("#delete-filters").hide())}),$("#edit-filters,#show-filters").hide(),$(".checkbox-list.active").show().jScrollPane({verticalGutter:0}).removeClass("active")}),$("#apply-filters").on("click",function(e){e.preventDefault(),showFilteredProfiles(),window.location.hash="filtered",$("#profile-filters").slideUp()}),$("#delete-filters").on("click",function(e){e.preventDefault(),$("#profile-filters :checkbox").prop("checked",!1),updateCurrentFilters(),$("#profile-filters").slideUp(function(){showAllProfiles()})}),$("#cancel-filters").on("click",function(e){e.preventDefault(),$("#profile-filters").slideUp()}),$("#profile-filters .checkbox-list").on("click","label,input",function(){updateCurrentFilters()}),$("input[name=experience]").on("click",function(){var selectThis=!1,selectNext=!1,clickedID=$(this).attr("id");$(this).is(":checked")&&(selectThis=!0),$("input[name=experience]").each(function(){$(this).prop("checked",!1),clickedID==$(this).attr("id")?(selectThis&&$(this).prop("checked",!0),selectNext=!0):selectNext&&$(this).prop("checked",!0)}),checkCheckboxLists()}),$(".select-filters-button").on("click",function(e){e.preventDefault(),$(this).hasClass("all")?$("#"+$(this).data("selectid")+" :checkbox").prop("checked",!0):$("#"+$(this).data("selectid")+" :checkbox").prop("checked",!1),updateCurrentFilters()}),$(".show-filter-controls").on("click",function(e){e.preventDefault(),$(".show-filter-controls").removeClass("active"),$(this).addClass("active"),$(".checkbox-list").hide(),$($(this).attr("href")).show().jScrollPane({verticalGutter:0,autoReinitialise:!0}),checkCheckboxLists()}),window.onhashchange=loadProfiles),$(".ajax-button").on("click",function(e){e.preventDefault();var ajax_action=$(this).data("ajax_action"),profile_page_id=$(this).data("profile_page_id"),user_id=$(this).data("user_id"),url=$(this).data("linkurl");$.post(ppt.ajaxurl,{datanonce:ppt.datanonce,action:"ltp_data",ajax_action:ajax_action,profile_page_id:profile_page_id,user_id:user_id},function(data){"save"===data.ajax_action&&data.result&&($("#save_"+data.profile_page_id).text("Remove"),$("#save_"+data.profile_page_id).data("ajax_action","remove"),$("#ltp_profile_wrap_"+data.profile_page_id).addClass("saved"),$("#view-saved").show()),"remove"===data.ajax_action&&($("#save_"+data.profile_page_id).text("Save"),$("#save_"+data.profile_page_id).data("ajax_action","save"),$("#ltp_profile_wrap_"+data.profile_page_id).removeClass("saved"),hasSaved()||$("#view-saved").hide(),"saved"===$("#profile-filters").data("showing")&&($(".ltp-profiles").isotope({filter:".saved"}),hasSaved()||$("#no-saved-profiles").show())),url&&(window.location.href=url)},"json")}),$(document).on("click",".history",function(e){e.preventDefault();var start=$(this).data("start"),num=$(this).data("num"),user_id=$(this).data("user_id");$.post(ppt.ajaxurl,{datanonce:ppt.datanonce,action:"ltp_data",ajax_action:"history",start:start,num:num,user_id:user_id},function(data){$.colorbox({html:data.result,width:"90%",maxWidth:"540px",height:"80%",maxHeight:"500px"})},"json")}),$(".sticky").sticky(),$(".showcase-button").colorbox({inline:!0,width:"90%",maxWidth:"940px",current:"Showcase {current} of {total}"})}(jQuery);